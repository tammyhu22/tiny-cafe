(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var M;const b=window,v=b.trustedTypes,T=v?v.createPolicy("lit-html",{createHTML:d=>d}):void 0,m=`lit$${(Math.random()+"").slice(9)}$`,B="?"+m,W=`<${B}>`,A=document,f=(d="")=>A.createComment(d),_=d=>d===null||typeof d!="object"&&typeof d!="function",U=Array.isArray,D=d=>U(d)||typeof(d==null?void 0:d[Symbol.iterator])=="function",y=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,O=/-->/g,I=/>/g,C=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),L=/'/g,k=/"/g,j=/^(?:script|style|textarea|title)$/i,w=Symbol.for("lit-noChange"),c=Symbol.for("lit-nothing"),E=new WeakMap,$=A.createTreeWalker(A,129,null,!1),z=(d,t)=>{const e=d.length-1,r=[];let i,o=t===2?"<svg>":"",s=y;for(let n=0;n<e;n++){const l=d[n];let g,u,a=-1,p=0;for(;p<l.length&&(s.lastIndex=p,u=s.exec(l),u!==null);)p=s.lastIndex,s===y?u[1]==="!--"?s=O:u[1]!==void 0?s=I:u[2]!==void 0?(j.test(u[2])&&(i=RegExp("</"+u[2],"g")),s=C):u[3]!==void 0&&(s=C):s===C?u[0]===">"?(s=i??y,a=-1):u[1]===void 0?a=-2:(a=s.lastIndex-u[2].length,g=u[1],s=u[3]===void 0?C:u[3]==='"'?k:L):s===k||s===L?s=C:s===O||s===I?s=y:(s=C,i=void 0);const P=s===C&&d[n+1].startsWith("/>")?" ":"";o+=s===y?l+W:a>=0?(r.push(g),l.slice(0,a)+"$lit$"+l.slice(a)+m+P):l+m+(a===-2?(r.push(void 0),n):P)}const h=o+(d[e]||"<?>")+(t===2?"</svg>":"");if(!Array.isArray(d)||!d.hasOwnProperty("raw"))throw Error("invalid template strings array");return[T!==void 0?T.createHTML(h):h,r]};class x{constructor({strings:t,_$litType$:e},r){let i;this.parts=[];let o=0,s=0;const h=t.length-1,n=this.parts,[l,g]=z(t,e);if(this.el=x.createElement(l,r),$.currentNode=this.el.content,e===2){const u=this.el.content,a=u.firstChild;a.remove(),u.append(...a.childNodes)}for(;(i=$.nextNode())!==null&&n.length<h;){if(i.nodeType===1){if(i.hasAttributes()){const u=[];for(const a of i.getAttributeNames())if(a.endsWith("$lit$")||a.startsWith(m)){const p=g[s++];if(u.push(a),p!==void 0){const P=i.getAttribute(p.toLowerCase()+"$lit$").split(m),S=/([.?@])?(.*)/.exec(p);n.push({type:1,index:o,name:S[2],strings:P,ctor:S[1]==="."?Z:S[1]==="?"?F:S[1]==="@"?K:N})}else n.push({type:6,index:o})}for(const a of u)i.removeAttribute(a)}if(j.test(i.tagName)){const u=i.textContent.split(m),a=u.length-1;if(a>0){i.textContent=v?v.emptyScript:"";for(let p=0;p<a;p++)i.append(u[p],f()),$.nextNode(),n.push({type:2,index:++o});i.append(u[a],f())}}}else if(i.nodeType===8)if(i.data===B)n.push({type:2,index:o});else{let u=-1;for(;(u=i.data.indexOf(m,u+1))!==-1;)n.push({type:7,index:o}),u+=m.length-1}o++}}static createElement(t,e){const r=A.createElement("template");return r.innerHTML=t,r}}function G(d,t,e=d,r){var i,o,s,h;if(t===w)return t;let n=r!==void 0?(i=e._$Co)===null||i===void 0?void 0:i[r]:e._$Cl;const l=_(t)?void 0:t._$litDirective$;return(n==null?void 0:n.constructor)!==l&&((o=n==null?void 0:n._$AO)===null||o===void 0||o.call(n,!1),l===void 0?n=void 0:(n=new l(d),n._$AT(d,e,r)),r!==void 0?((s=(h=e)._$Co)!==null&&s!==void 0?s:h._$Co=[])[r]=n:e._$Cl=n),n!==void 0&&(t=G(d,n._$AS(d,t.values),n,r)),t}class V{constructor(t,e){this.u=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(t){var e;const{el:{content:r},parts:i}=this._$AD,o=((e=t==null?void 0:t.creationScope)!==null&&e!==void 0?e:A).importNode(r,!0);$.currentNode=o;let s=$.nextNode(),h=0,n=0,l=i[0];for(;l!==void 0;){if(h===l.index){let g;l.type===2?g=new H(s,s.nextSibling,this,t):l.type===1?g=new l.ctor(s,l.name,l.strings,this,t):l.type===6&&(g=new J(s,this,t)),this.u.push(g),l=i[++n]}h!==(l==null?void 0:l.index)&&(s=$.nextNode(),h++)}return o}p(t){let e=0;for(const r of this.u)r!==void 0&&(r.strings!==void 0?(r._$AI(t,r,e),e+=r.strings.length-2):r._$AI(t[e])),e++}}class H{constructor(t,e,r,i){var o;this.type=2,this._$AH=c,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=r,this.options=i,this._$Cm=(o=i==null?void 0:i.isConnected)===null||o===void 0||o}get _$AU(){var t,e;return(e=(t=this._$AM)===null||t===void 0?void 0:t._$AU)!==null&&e!==void 0?e:this._$Cm}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return e!==void 0&&t.nodeType===11&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=G(this,t,e),_(t)?t===c||t==null||t===""?(this._$AH!==c&&this._$AR(),this._$AH=c):t!==this._$AH&&t!==w&&this.g(t):t._$litType$!==void 0?this.$(t):t.nodeType!==void 0?this.T(t):D(t)?this.k(t):this.g(t)}O(t,e=this._$AB){return this._$AA.parentNode.insertBefore(t,e)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}g(t){this._$AH!==c&&_(this._$AH)?this._$AA.nextSibling.data=t:this.T(A.createTextNode(t)),this._$AH=t}$(t){var e;const{values:r,_$litType$:i}=t,o=typeof i=="number"?this._$AC(t):(i.el===void 0&&(i.el=x.createElement(i.h,this.options)),i);if(((e=this._$AH)===null||e===void 0?void 0:e._$AD)===o)this._$AH.p(r);else{const s=new V(o,this),h=s.v(this.options);s.p(r),this.T(h),this._$AH=s}}_$AC(t){let e=E.get(t.strings);return e===void 0&&E.set(t.strings,e=new x(t)),e}k(t){U(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let r,i=0;for(const o of t)i===e.length?e.push(r=new H(this.O(f()),this.O(f()),this,this.options)):r=e[i],r._$AI(o),i++;i<e.length&&(this._$AR(r&&r._$AB.nextSibling,i),e.length=i)}_$AR(t=this._$AA.nextSibling,e){var r;for((r=this._$AP)===null||r===void 0||r.call(this,!1,!0,e);t&&t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){var e;this._$AM===void 0&&(this._$Cm=t,(e=this._$AP)===null||e===void 0||e.call(this,t))}}class N{constructor(t,e,r,i,o){this.type=1,this._$AH=c,this._$AN=void 0,this.element=t,this.name=e,this._$AM=i,this.options=o,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=c}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,r,i){const o=this.strings;let s=!1;if(o===void 0)t=G(this,t,e,0),s=!_(t)||t!==this._$AH&&t!==w,s&&(this._$AH=t);else{const h=t;let n,l;for(t=o[0],n=0;n<o.length-1;n++)l=G(this,h[r+n],e,n),l===w&&(l=this._$AH[n]),s||(s=!_(l)||l!==this._$AH[n]),l===c?t=c:t!==c&&(t+=(l??"")+o[n+1]),this._$AH[n]=l}s&&!i&&this.j(t)}j(t){t===c?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class Z extends N{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===c?void 0:t}}const q=v?v.emptyScript:"";class F extends N{constructor(){super(...arguments),this.type=4}j(t){t&&t!==c?this.element.setAttribute(this.name,q):this.element.removeAttribute(this.name)}}class K extends N{constructor(t,e,r,i,o){super(t,e,r,i,o),this.type=5}_$AI(t,e=this){var r;if((t=(r=G(this,t,e,0))!==null&&r!==void 0?r:c)===w)return;const i=this._$AH,o=t===c&&i!==c||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,s=t!==c&&(i===c||o);o&&this.element.removeEventListener(this.name,this,i),s&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,r;typeof this._$AH=="function"?this._$AH.call((r=(e=this.options)===null||e===void 0?void 0:e.host)!==null&&r!==void 0?r:this.element,t):this._$AH.handleEvent(t)}}class J{constructor(t,e,r){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(t){G(this,t)}}const R=b.litHtmlPolyfillSupport;R==null||R(x,H),((M=b.litHtmlVersions)!==null&&M!==void 0?M:b.litHtmlVersions=[]).push("2.6.1");const Q=(d,t,e)=>{var r,i;const o=(r=e==null?void 0:e.renderBefore)!==null&&r!==void 0?r:t;let s=o._$litPart$;if(s===void 0){const h=(i=e==null?void 0:e.renderBefore)!==null&&i!==void 0?i:null;o._$litPart$=s=new H(t.insertBefore(f(),h),h,void 0,e??{})}return s._$AI(d),s};Q(view(),document.body);let X=class extends GameObject{constructor(t){super(t),this.movingProgressRemaining=0,this.isStanding=!1,this.isPlayerControlled=t.isPlayerControlled||!1,this.directionUpdate={up:["y",-1],down:["y",1],left:["x",-1],right:["x",1]}}update(t){this.movingProgressRemaining>0?this.updatePosition():(!t.map.isCutscenePlaying&&this.isPlayerControlled&&t.arrow&&this.startBehavior(t,{type:"walk",direction:t.arrow}),this.updateSprite(t))}startBehavior(t,e){if(this.direction=e.direction,e.type==="walk"){if(t.map.isSpaceTaken(this.x,this.y,this.direction)){e.retry&&setTimeout(()=>{this.startBehavior(t,e)},10);return}t.map.moveWall(this.x,this.y,this.direction),this.movingProgressRemaining=16,this.updateSprite(t)}e.type==="stand"&&(this.isStanding=!0,setTimeout(()=>{utils.emitEvent("PersonStandComplete",{whoId:this.id}),this.isStanding=!1},e.time))}updatePosition(){const[t,e]=this.directionUpdate[this.direction];this[t]+=e,this.movingProgressRemaining-=1,this.movingProgressRemaining===0&&utils.emitEvent("PersonWalkingComplete",{whoId:this.id})}updateSprite(){if(this.movingProgressRemaining>0){this.sprite.setAnimation("walk-"+this.direction);return}this.sprite.setAnimation("idle-"+this.direction)}};window.OverworldMaps={Cafe:{lowerSrc:"/images/mapLower.png",upperSrc:"/images/mapUpper.png",gameObjects:{hero:new Person({isPlayerControlled:!0,x:utils.withGrid(5),y:utils.withGrid(6)}),npcA:new Person({x:utils.withGrid(10),y:utils.withGrid(8),src:"/images/npc1.png",behaviorLoop:[{type:"stand",direction:"left",time:800},{type:"stand",direction:"up",time:800},{type:"stand",direction:"right",time:1200},{type:"stand",direction:"up",time:300}],talking:[{events:[{type:"textMessage",text:"can I help you?",faceHero:"npcA"},{type:"textMessage",text:"I'm busy"},{who:"hero",type:"walk",direction:"up"}]}]}),npcB:new Person({x:utils.withGrid(10),y:utils.withGrid(3),src:"/images/npc3.png",behaviorLoop:[{type:"walk",direction:"left"},{type:"stand",direction:"up",time:800},{type:"walk",direction:"down"},{type:"walk",direction:"right"},{type:"walk",direction:"up"}]}),npcC:new Person({x:utils.withGrid(2),y:utils.withGrid(7),src:"/images/erio.png",behaviorLoop:[{type:"stand",direction:"left"}]})},walls:{[utils.asGridCoord(1,0)]:!0,[utils.asGridCoord(1,1)]:!0,[utils.asGridCoord(1,2)]:!0,[utils.asGridCoord(1,3)]:!0,[utils.asGridCoord(1,4)]:!0,[utils.asGridCoord(2,0)]:!0,[utils.asGridCoord(2,1)]:!0,[utils.asGridCoord(3,1)]:!0,[utils.asGridCoord(4,1)]:!0,[utils.asGridCoord(5,1)]:!0,[utils.asGridCoord(6,1)]:!0,[utils.asGridCoord(7,1)]:!0,[utils.asGridCoord(8,1)]:!0,[utils.asGridCoord(9,1)]:!0,[utils.asGridCoord(10,1)]:!0,[utils.asGridCoord(11,1)]:!0,[utils.asGridCoord(12,1)]:!0,[utils.asGridCoord(13,1)]:!0,[utils.asGridCoord(9,2)]:!0,[utils.asGridCoord(10,2)]:!0,[utils.asGridCoord(11,2)]:!0,[utils.asGridCoord(12,2)]:!0,[utils.asGridCoord(13,2)]:!0,[utils.asGridCoord(14,2)]:!0,[utils.asGridCoord(15,2)]:!0,[utils.asGridCoord(12,3)]:!0,[utils.asGridCoord(13,3)]:!0,[utils.asGridCoord(14,3)]:!0,[utils.asGridCoord(12,4)]:!0,[utils.asGridCoord(13,4)]:!0,[utils.asGridCoord(14,4)]:!0,[utils.asGridCoord(12,6)]:!0,[utils.asGridCoord(13,6)]:!0,[utils.asGridCoord(14,6)]:!0,[utils.asGridCoord(11,8)]:!0,[utils.asGridCoord(12,8)]:!0,[utils.asGridCoord(13,8)]:!0,[utils.asGridCoord(14,8)]:!0,[utils.asGridCoord(8,5)]:!0,[utils.asGridCoord(9,5)]:!0,[utils.asGridCoord(10,5)]:!0,[utils.asGridCoord(1,4)]:!0,[utils.asGridCoord(2,4)]:!0,[utils.asGridCoord(3,4)]:!0,[utils.asGridCoord(4,4)]:!0,[utils.asGridCoord(5,4)]:!0,[utils.asGridCoord(6,4)]:!0,[utils.asGridCoord(1,6)]:!0,[utils.asGridCoord(1,7)]:!0,[utils.asGridCoord(1,8)]:!0,[utils.asGridCoord(3,6)]:!0,[utils.asGridCoord(3,7)]:!0,[utils.asGridCoord(3,8)]:!0,[utils.asGridCoord(5,8)]:!0,[utils.asGridCoord(6,8)]:!0,[utils.asGridCoord(7,8)]:!0,[utils.asGridCoord(8,8)]:!0,[utils.asGridCoord(1,9)]:!0,[utils.asGridCoord(2,9)]:!0,[utils.asGridCoord(3,9)]:!0,[utils.asGridCoord(4,9)]:!0,[utils.asGridCoord(5,9)]:!0,[utils.asGridCoord(6,9)]:!0,[utils.asGridCoord(7,9)]:!0,[utils.asGridCoord(8,9)]:!0,[utils.asGridCoord(9,9)]:!0,[utils.asGridCoord(10,9)]:!0,[utils.asGridCoord(11,9)]:!0,[utils.asGridCoord(12,9)]:!0,[utils.asGridCoord(13,9)]:!0,[utils.asGridCoord(14,9)]:!0,[utils.asGridCoord(15,1)]:!0,[utils.asGridCoord(15,2)]:!0,[utils.asGridCoord(15,3)]:!0,[utils.asGridCoord(15,4)]:!0,[utils.asGridCoord(15,5)]:!0,[utils.asGridCoord(15,6)]:!0,[utils.asGridCoord(15,7)]:!0,[utils.asGridCoord(15,8)]:!0,[utils.asGridCoord(15,9)]:!0,[utils.asGridCoord(15,10)]:!0,[utils.asGridCoord(0,1)]:!0,[utils.asGridCoord(0,2)]:!0,[utils.asGridCoord(0,3)]:!0,[utils.asGridCoord(0,4)]:!0,[utils.asGridCoord(-1,5)]:!0,[utils.asGridCoord(0,6)]:!0,[utils.asGridCoord(0,7)]:!0,[utils.asGridCoord(0,8)]:!0,[utils.asGridCoord(0,9)]:!0,[utils.asGridCoord(0,10)]:!0},cutsceneSpaces:{[utils.asGridCoord(0,5)]:[{events:[{who:"npcC",type:"walk",direction:"up"},{who:"npcC",type:"stand",direction:"up",time:500},{type:"textMessage",text:"Hey, where you goin'?"},{type:"textMessage",text:"you're shift isn't over yet!"},{who:"hero",type:"walk",direction:"right"},{who:"npcC",type:"walk",direction:"down"}]}]}},Cafe2:{lowerSrc:"/images/mapLower.png",upperSrc:"/images/mapUpper.png",gameObjects:{hero:new GameObject({x:3,y:6}),npc1:new GameObject({x:9,y:7,src:"/images/npc1.png"}),npc2:new GameObject({x:9,y:7,src:"/images/npc3.png"})}}};(function(){console.log("It's working!"),new Overworld({element:document.querySelector(".game-container")}).init()})();
